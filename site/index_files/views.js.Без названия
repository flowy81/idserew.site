var $j=jQuery.noConflict();$j.view('#header',function(){var transform=Modernizr.prefixed('transform'),consultation=this.$('#quick-consultation'),consultationHeight,winWidth;function resize(event){var width=(event)?event.width:site.window.width(),height=(event)?event.height:site.window.height();if(site.window.width()==winWidth)return;winWidth=site.window.width();if(!Modernizr.touch&&width>1000&&height>800){site.body.addClass('header-sticky');}else{site.body.removeClass('header-sticky');}
site.body.removeClass('quick-consultation-toggle');consultationHeight=consultation.outerHeight();if(Modernizr.csstransforms){consultation.data('height',consultationHeight);consultation.css(transform,'translateY(-'+consultationHeight+'px)');}else{consultation.css('top',-(consultationHeight-this.el.outerHeight()));}}
site.on('resize',function(){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){resize.apply(context,args);},500);resize.apply(context,args);};});resize.call(this);consultation.show();this.el.on('click','.nav-toggle',function(event){site.body.toggleClass('nav-active');event.preventDefault();if(site.body.hasClass('nav-active')){$j('#content').on('click',function(){site.body.removeClass('nav-active');});}else{$j('#content').off('click');}}).on('click','.search',function(event){var form=$j(this);if(!form.hasClass('search-active')){event.preventDefault();form.addClass('search-active');form.find('input').focus();setTimeout(function(){$j('#content').one('click',function(){form.removeClass('search-active');});});}}).on('submit','.search',function(event){var form=$j(this);if(form.find('input').val()==''){form.removeClass('search-active');event.preventDefault();}}).on('click','#quick-consultation-toggle',function(event){if(!Modernizr.csstransforms)return;event.preventDefault();if(site.body.hasClass('nav-active'))return;site.body.toggleClass('quick-consultation-active');if(site.body.hasClass('quick-consultation-active')){consultation.css(transform,'translateY(0)');}else{consultation.css(transform,'translateY(-'+consultation.data('height')+'px)');}});$j('.modal').on('show.bs.modal hide.bs.modal',function(){setTimeout(function(){site.body.removeClass('nav-active');},1);});});$j.view('#nav',function(){if(Modernizr.touch||Modernizr.mq('(max-width: 1229px)')){this.$('.submenu').find('br').replaceWith(' ');this.el.on('click','.has-submenu > a',function(event){var item=$j(this).parent();if(!item.hasClass('has-submenu-active')){item.addClass('has-submenu-active');event.preventDefault();}});}
if(Modernizr.ie8){$j('#nav .menu').children().each(function(i){$j(this).addClass('menu-item-'+(i+1));});}});$j.view('.btn',function(){if(!Modernizr.touch&&Modernizr.csstransforms&&!this.el.hasClass('btn-dropdown')&&this.el.not('input')){this.el.each(function(){var self=$j(this);self.html('<span>'+self.text()+'</span>').addClass('btn-initialized');});}});$j.view('form',function(){site.body.on('focus','input',function(event){$j(this).removeClass('has-value');}).on('blur','input',function(event){var self=$j(this);self.val()?self.addClass('has-value'):self.removeClass('has-value');});});$j.view('.nav-tabs',function(){this.el.each(function(){var self=$j(this),tabs=self.children(),options=[],select,panes;if(self.hasClass('nav-tabs-secondary'))return;self.addClass('has-'+tabs.length);tabs.each(function(){var link=$j(this).find('a');options.push($j('<option value="'+link.attr('href')+'">'+link.text()+'</option>'));});select=$j('<select>').append(options).insertBefore(self).wrap('<div class="nav-tabs-select"></div>').change(function(){self.find('a[href="'+$j(this).val()+'"]').trigger('click');});});});$j.view('#locations',function(){var tabs=this.$('.nav li'),results=this.$('.locations-results li');function filter(type){tabs.removeClass('active');tabs.find('a[href="#'+type+'"]').parent().addClass('active');results.hide().filter('[data-type*='+type+']').show();}
this.el.on('click','.nav a',function(event){var self=$(this),type=self.attr('href').substr(1);event.preventDefault();filter(type);});filter('homeowner');});$j.view('#filters',function(){});$j.view('#gallery',function(){this.el.imagesLoaded($j.proxy(function(){this.el.masonry();},this));});$j.view('#product-detail',function(){var hero=$j('#product-hero'),slider=hero.find('.carousel-inner');quicknav=this.$('.quick-nav');slider.carousel({interval:false}).addClass('slide').on('swiperight',function(){slider.carousel('prev');}).on('swipeleft',function(){slider.carousel('next');});this.$('.carousel-indicators').on('click','li',function(event){event.preventDefault();var index=$j(this).data('slide-to');slider.carousel(index);});if(site.window.width()>1024){quicknav.addClass('is-sticky').css('top',hero.offset().top);}
quicknav.removeClass('hidden');});$j.view('#home-ideas',function(){if(site.window.width()>1024){var box=this.$('.callout-box'),divHeight=this.el.outerHeight(),divOffset=this.el.offset().top,transform=Modernizr.prefixed('transform'),top=divOffset-divHeight,bottom=divOffset;this.el.css('overflow','hidden');box.css('position','relative');site.window.on('scroll.parallaxish',$.throttle(function(){if(!$.inview(this.el))return;var offset=Math.map(site.window.scrollTop(),top,bottom,80,-100);box.css(transform,'translateY('+offset+'px)');},10,this));setTimeout(function(){site.window.on('resize',function(event){box.css(transform,'translateY(0)');site.window.off('scroll.parallaxish');});});}});